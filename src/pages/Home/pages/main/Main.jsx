import moment from "moment/moment";
import { useEffect, useState } from "react";
import { useOutletContext } from "react-router-dom";
import TechStack from "./components/TechStack";
import OverallStats from "./components/OverallStats";
import Featured from "./components/Featured";
import Socials from "./components/Socials";

export default function Main(){
    const [dateTime, setDateTime] = useState(moment(new Date()).format("ddd, MMMM Do YYYY, hh:mm:ss A"));
    const [date, setDate] = useState(moment(new Date()).format("DD"));

    useEffect(() => {
        const d = setInterval(() => {
            setDateTime(moment(new Date()).format("ddd, MMMM Do YYYY, hh:mm:ss A"));
            setDate(moment(new Date()).format("DD"));
        }, 1000);

        return () => clearInterval(d);
    }, [date]);

    const breakpoint = useOutletContext();
    
    return (
        <div className={`w-full scrollbar-hidden gap-y-[0.5rem] grid [&>div]:w-full [&>div]:flex [&>div]:flex-col [&>div]:gap-y-[0.5rem] [&>div>div]:bg-componentsColor [&>div>div]:p-[1rem] [&>div>div>span]:flex [&>div>div>span]:flex-row [&>div>div>span]:gap-[0.75rem] [&>div>div>span]:items-center ${breakpoint >= 992 ? "h-full grid-cols-[2fr_1fr]" : "h-fit grid-cols-1"} ${breakpoint >= 768 ? "gap-y-[1rem] [&>div]:overflow-scroll [&>div]:h-full [&>div]:gap-y-[1rem] [&>div>div]:mx-[1rem] [&>div>div]:border [&>div>div]:border-borderColor [&>div>div]:w-[calc(100%-2rem)] [&>div>div]:rounded-xl [&>div]:gap-[1rem]" : "[&>div]:h-fit [&>div>div]:shadow-[0px_0px_10px_var(--color-componentsShadow)] [&>div>div]:w-full"}`}>
            <div>
                <span className={`block w-[calc(100%-2rem)] m-[1rem] mb-[0.5rem] ${breakpoint >= 992 ? "aspect-[2.5/1] mb-[0rem]" : breakpoint >= 768 ? "aspect-[1.8/1] mb-[0rem]" : "aspect-[1.35/1]"} flex flex-col p-[1.2rem] rounded-xl text-componentsColor bg-[#123456]`}>
                    <span className="flex flex-row items-start justify-start gap-[0.5rem]">
                        <span className="relative">
                            <svg height="24px" width="24px" viewBox="0 0 24 24" stroke="var(--color-componentsColor)" fill="none" strokeWidth="1.0" strokeOpacity="1" strokeMiterlimit="10" strokeLinecap="round">
                                <path d="M16.18,2.43C16.18,2.43,16.18,1.0,16.18,1.0C16.18,1.0,14.63,1.0,14.63,1.0C14.63,1.0,14.63,2.43,14.63,2.43C14.63,2.43,9.37,2.43,9.37,2.43C9.37,2.43,9.37,1.0,9.37,1.0C9.37,1.0,7.82,1.0,7.82,1.0C7.82,1.0,7.82,2.43,7.82,2.43C7.82,2.43,1.0,2.43,1.0,2.43C1.0,2.43,1.0,23.0,1.0,23.0C1.0,23.0,23.0,23.0,23.0,23.0C23.0,23.0,23.0,2.43,23.0,2.43C23.0,2.43,16.18,2.43,16.18,2.43M7.82,4.14C7.82,4.14,7.82,5.57,7.82,5.57C7.82,5.57,9.37,5.57,9.37,5.57C9.37,5.57,9.37,4.14,9.37,4.14C9.37,4.14,14.63,4.14,14.63,4.14C14.63,4.14,14.63,5.29,14.63,5.29C14.63,5.29,16.18,5.29,16.18,5.29C16.18,5.29,16.18,4.14,16.18,4.14C16.18,4.14,21.45,4.14,21.45,4.14C21.45,4.14,21.45,7.0,21.45,7.0C21.45,7.0,2.55,7.0,2.55,7.0C2.55,7.0,2.55,4.14,2.55,4.14C2.55,4.14,7.82,4.14,7.82,4.14M2.55,21.29C2.55,21.29,2.55,8.71,2.55,8.71C2.55,8.71,21.45,8.71,21.45,8.71C21.45,8.71,21.45,21.29,21.45,21.29C21.45,21.29,2.55,21.29,2.55,21.29Z" />
                            </svg>
                            <p className="w-[1.25rem] text-[0.7rem] text-center absolute top-[7px] left-[2px] font-extrabold">{date}</p>
                        </span>
                        <p className="text-ellipsis text-nowrap whitespace-nowrap overflow-x-hidden">{dateTime}</p>
                    </span>
                    <p className="mt-auto text-[1.7rem] font-black">Programming for Fun</p>
                </span>
                <div>
                    <span>
                        <svg width="22px" height="22px" viewBox="0 0 22 22"><path fill="#000000" fill-opacity="1.0" stroke="#000000" stroke-width="1.0" stroke-opacity="0.0" stroke-miterlimit="10" d="M3.16,17.0C3.82,14.32,4.37,12.14,4.79,10.46C4.89,10.07,5.14,10.13,5.35,10.3C6.35,11.09,8.51,12.81,8.51,12.81C8.51,12.81,11.27,6.16,11.69,5.16C11.76,4.99,11.86,4.93,11.99,5.1C12.63,5.91,15.13,9.07,15.13,9.07C15.13,9.07,18.98,3.11,19.51,2.23C20.21,1.08,15.57,12.84,15.57,12.84C15.57,12.84,12.3,8.84,12.3,8.84C12.3,8.84,10.16,13.95,9.48,15.47C9.37,15.71,9.12,15.66,8.99,15.56C8.21,15.0,6.05,13.49,6.05,13.49C6.05,13.49,5.59,15.37,5.09,17.4C4.73,18.86,2.8,18.49,3.16,17.0Z" stroke-linecap="round"/><path fill="#000000" fill-opacity="1.0" stroke="#000000" stroke-width="2.0" stroke-opacity="0.0" stroke-miterlimit="10" d="M0.04,20.85C0.04,20.85,0.04,2.0,0.04,0.94C0.05,-0.3,1.95,-0.28,1.95,1.03C1.95,2.27,2.05,18.66,2.05,19.42C2.05,19.92,2.1,19.95,2.66,19.95C3.89,19.94,19.37,19.93,21.01,19.92C22.28,19.92,22.25,21.82,21.01,21.83C19.31,21.84,1.54,21.96,0.99,21.94C0.5,21.93,0.05,21.55,0.04,20.85Z" stroke-linecap="round"/></svg>
                        <p className="font-bold text-[1.35rem] text-nowrap">Overall Stats</p>
                    </span>
                    <OverallStats bp={breakpoint} />
                </div>
                <div>
                    <span>
                        <svg width="22px" height="22px" viewBox="0 0 22 22"><path fill="#000000" fillRule="evenodd" fill-opacity="1.0" stroke="#000000" stroke-width="0.5" stroke-opacity="1.0" stroke-miterlimit="10" d="M10.94,0.5C8.69,0.5,6.93,0.5,5.54,0.69C4.13,0.87,3.02,1.27,2.14,2.14C1.27,3.02,0.87,4.13,0.69,5.54C0.5,6.93,0.5,8.69,0.5,10.94C0.5,10.94,0.5,11.06,0.5,11.06C0.5,13.31,0.5,15.07,0.69,16.46C0.87,17.87,1.27,18.98,2.14,19.86C3.02,20.73,4.13,21.13,5.54,21.31C6.93,21.5,8.69,21.5,10.94,21.5C10.94,21.5,11.06,21.5,11.06,21.5C13.31,21.5,15.07,21.5,16.46,21.31C17.87,21.13,18.98,20.73,19.86,19.86C20.73,18.98,21.13,17.87,21.31,16.46C21.5,15.07,21.5,13.31,21.5,11.06C21.5,11.06,21.5,10.94,21.5,10.94C21.5,8.69,21.5,6.93,21.31,5.54C21.13,4.13,20.73,3.02,19.86,2.14C18.98,1.27,17.87,0.87,16.46,0.69C15.07,0.5,13.31,0.5,11.06,0.5C11.06,0.5,10.94,0.5,10.94,0.5M5.38,2.19C4.35,2.38,3.68,2.68,3.18,3.18C2.63,3.73,2.31,4.49,2.14,5.74C1.97,7.01,1.97,8.68,1.97,11.0C1.97,13.32,1.97,14.99,2.14,16.26C2.31,17.51,2.63,18.27,3.18,18.82C3.73,19.37,4.49,19.69,5.74,19.86C7.01,20.03,8.68,20.03,11.0,20.03C13.32,20.03,14.99,20.03,16.26,19.86C17.51,19.69,18.27,19.37,18.82,18.82C19.37,18.27,19.69,17.51,19.86,16.26C20.03,14.99,20.03,13.32,20.03,11.0C20.03,8.68,20.03,7.01,19.86,5.74C19.69,4.49,19.37,3.73,18.82,3.18C18.32,2.68,17.65,2.38,16.62,2.19C16.62,2.19,16.62,10.83,16.62,10.83C16.62,11.29,16.62,11.66,16.6,11.96C16.59,12.25,16.55,12.55,16.43,12.83C15.99,13.79,14.94,14.31,13.9,14.07C13.62,14.0,13.35,13.84,13.11,13.68C12.87,13.51,12.57,13.29,12.21,13.0C12.21,13.0,12.19,12.99,12.19,12.99C11.73,12.64,11.61,12.54,11.49,12.49C11.18,12.36,10.82,12.36,10.51,12.49C10.39,12.54,10.27,12.64,9.81,12.99C9.81,12.99,9.79,13.0,9.79,13.0C9.43,13.29,9.13,13.51,8.89,13.68C8.65,13.84,8.38,14.0,8.1,14.07C7.06,14.31,6.01,13.79,5.57,12.83C5.45,12.55,5.41,12.25,5.4,11.96C5.38,11.66,5.38,11.29,5.38,10.83C5.38,10.83,5.38,2.19,5.38,2.19M15.15,2.03C14.05,1.97,12.7,1.97,11.0,1.97C9.3,1.97,7.95,1.97,6.85,2.03C6.85,2.03,6.85,10.81,6.85,10.81C6.85,11.29,6.85,11.63,6.86,11.88C6.88,12.13,6.91,12.21,6.91,12.23C7.05,12.55,7.41,12.73,7.76,12.64C7.77,12.64,7.85,12.61,8.06,12.47C8.27,12.33,8.53,12.12,8.91,11.83C8.91,11.83,8.98,11.78,8.98,11.78C9.34,11.5,9.62,11.28,9.93,11.15C10.61,10.85,11.39,10.85,12.07,11.15C12.38,11.28,12.66,11.5,13.02,11.78C13.02,11.78,13.09,11.83,13.09,11.83C13.47,12.12,13.73,12.33,13.94,12.47C14.15,12.61,14.23,12.64,14.24,12.64C14.59,12.73,14.95,12.55,15.09,12.23C15.09,12.21,15.12,12.13,15.14,11.88C15.15,11.63,15.15,11.29,15.15,10.81C15.15,10.81,15.15,2.03,15.15,2.03C15.15,2.03,10.94,0.5,10.94,0.5Z" stroke-linecap="round"/><path fill="#000000" fill-opacity="1.0" stroke="#000000" stroke-width="0.5" stroke-opacity="1.0" stroke-miterlimit="10" d="M5.38,16.86C5.38,16.46,5.72,16.13,6.12,16.13C6.12,16.13,15.88,16.13,15.88,16.13C16.28,16.13,16.62,16.46,16.62,16.86C16.62,17.26,16.28,17.59,15.88,17.59C15.88,17.59,6.12,17.59,6.12,17.59C5.72,17.59,5.38,17.26,5.38,16.86Z" stroke-linecap="round"/></svg>
                        <p className="font-bold text-[1.35rem] text-nowrap">Featured</p>
                    </span>
                    <Featured bp={breakpoint} />
                </div>
            </div>
            <div className={breakpoint >= 992 ? "[&>div]:ml-[0rem] mt-[1rem] mb-[1rem]" : 'mb-[1rem]'}>
                <div className={`bg-componentsColor ${breakpoint >= 768 ? `${breakpoint >= 992 ? "w-[calc(100%-1rem)]" : "w-[calc(100%-2rem)]"} rounded-xl` : "w-full"}`}>
                    <span>
                        <svg width="22px" height="22px" viewBox="0 0 22 22"><path fill="#000000" fill-opacity="1.0" stroke="#000000" stroke-width="0.5" stroke-opacity="0.0" stroke-miterlimit="10" d="M8.9,2.68C8.9,2.68,2.09,6.61,0.8,7.34C-0.09,7.83,-0.3,8.69,0.61,9.2C4.3,11.26,11.0,15.19,11.0,15.19C11.0,15.19,19.73,10.15,21.27,9.29C22.24,8.74,22.22,8.0,21.29,7.41C19.89,6.55,17.32,5.09,16.49,4.64C16.24,4.5,15.95,4.44,15.57,4.65C15.12,4.89,14.46,5.2,12.04,6.63C10.85,7.33,10.06,6.83,10.06,6.83C10.06,6.83,9.62,9.25,9.62,9.25C9.62,9.25,12.24,9.67,12.24,9.67C12.24,9.67,12.0,8.7,13.41,7.98C15.48,6.92,15.0,7.2,15.8,6.77C16.02,6.65,16.08,6.65,16.31,6.76C17.46,7.36,17.42,7.31,18.52,7.93C18.84,8.11,18.82,8.52,18.53,8.69C17.65,9.19,12.73,11.89,11.53,12.56C11.02,12.84,10.79,12.84,10.31,12.56C9.17,11.91,5.14,9.62,3.69,8.82C3.06,8.47,3.07,8.1,3.69,7.79C4.68,7.3,10.42,4.0,10.42,4.0C12.46,4.54,13.39,2.47,12.39,1.54C11.43,0.64,9.52,0.77,8.9,2.68Z" stroke-linecap="round"/><path fill="#000000" fill-opacity="1.0" stroke="#000000" stroke-width="0.0" stroke-opacity="0.0" stroke-miterlimit="10" d="M3.92,11.11C4.14,11.51,3.85,11.62,3.5,11.82C2.84,12.2,1.09,13.12,0.47,13.47C-0.13,13.82,-0.09,14.72,0.55,15.14C1.67,15.87,11.01,21.03,11.01,21.03C11.01,21.03,21.07,15.3,21.51,15.05C22.08,14.73,22.18,13.77,21.46,13.36C21.11,13.17,18.77,11.96,18.31,11.72C18.0,11.55,17.8,11.24,18.4,10.78C18.64,10.59,14.2,13.13,14.88,12.87C15.68,12.55,15.92,12.43,16.53,12.77C17.26,13.18,18.15,13.61,18.47,13.8C18.97,14.09,18.92,14.39,18.5,14.62C18.06,14.87,11.01,18.85,11.01,18.85C11.01,18.85,4.28,14.92,3.54,14.49C3.15,14.25,3.37,14.04,3.57,13.93C4.24,13.56,4.74,13.3,5.5,12.88C6.03,12.58,6.14,12.51,6.88,12.78C7.06,12.85,3.54,10.45,3.92,11.11Z" stroke-linecap="round"/></svg>
                        <p className="font-bold text-[1.35rem] text-nowrap">Tech Stack</p>
                    </span>
                    <div className="w-full">
                        <TechStack bp={breakpoint} />
                    </div>
                </div>
                <div>
                    <span>
                        <svg width="22px" height="22px" viewBox="0 0 22 22"><path fill="#000000" fill-opacity="1.0" stroke="#000000" stroke-width="1.0" stroke-opacity="1.0" stroke-miterlimit="10" d="M17.52,13.55C16.68,13.55,15.88,13.81,15.19,14.32C15.19,14.32,8.54,11.0,8.54,11.0C8.54,11.0,15.19,7.68,15.19,7.68C15.88,8.18,16.68,8.45,17.52,8.45C19.72,8.45,21.5,6.67,21.5,4.47C21.5,2.28,19.72,0.5,17.52,0.5C15.35,0.5,13.57,2.26,13.55,4.43C13.55,4.43,6.81,7.8,6.81,7.8C6.12,7.29,5.32,7.02,4.48,7.02C2.28,7.02,0.5,8.81,0.5,11.0C0.5,13.19,2.28,14.97,4.48,14.97C5.32,14.97,6.12,14.71,6.81,14.2C6.81,14.2,13.55,17.57,13.55,17.57C13.57,19.74,15.35,21.5,17.52,21.5C18.59,21.5,19.58,21.09,20.34,20.34C21.09,19.58,21.5,18.59,21.5,17.52C21.5,15.33,19.72,13.55,17.52,13.55M19.74,19.74C19.15,20.34,18.36,20.66,17.52,20.66C15.79,20.66,14.38,19.25,14.38,17.52C14.38,17.51,14.39,17.48,14.39,17.46C14.39,17.43,14.4,17.39,14.4,17.34C14.41,17.18,14.32,17.02,14.17,16.94C14.17,16.94,6.95,13.33,6.95,13.33C6.89,13.3,6.82,13.29,6.76,13.29C6.66,13.29,6.57,13.32,6.49,13.39C5.91,13.88,5.21,14.14,4.48,14.14C2.75,14.14,1.34,12.73,1.34,11.0C1.34,9.27,2.75,7.86,4.48,7.86C5.21,7.86,5.91,8.12,6.49,8.61C6.62,8.72,6.8,8.74,6.95,8.66C6.95,8.66,14.17,5.05,14.17,5.05C14.32,4.98,14.41,4.82,14.4,4.65C14.4,4.61,14.4,4.57,14.39,4.54C14.39,4.51,14.38,4.49,14.38,4.47C14.38,2.74,15.79,1.34,17.52,1.34C19.26,1.34,20.66,2.74,20.66,4.47C20.66,6.21,19.25,7.61,17.52,7.61C16.79,7.61,16.09,7.35,15.51,6.86C15.38,6.75,15.2,6.73,15.05,6.81C15.05,6.81,7.83,10.42,7.83,10.42C7.68,10.5,7.59,10.65,7.6,10.82C7.6,10.82,7.6,11.18,7.6,11.18C7.59,11.34,7.68,11.5,7.83,11.58C7.83,11.58,15.05,15.19,15.05,15.19C15.2,15.26,15.38,15.24,15.51,15.13C16.09,14.64,16.79,14.38,17.52,14.38C19.25,14.38,20.66,15.79,20.66,17.52C20.66,18.36,20.34,19.15,19.74,19.74Z" stroke-linecap="round"/></svg>
                        <p className="font-bold text-[1.4rem] text-nowrap">Socials</p>
                    </span>
                    <div className="w-full">
                        <Socials />
                    </div>
                </div>
            </div>
        </div>
    )
}
